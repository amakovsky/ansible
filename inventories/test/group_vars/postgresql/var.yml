---
ansible_user: root
#radius_user: radius
#radius_user_pass: "mZph5AXJOsGv"
#hotspot_user: "hotspot"
#hotspot_user_pass: "wv3vH3fOtKSd"
postgresql_users:
  - name: "{{ hotspot_user }}"
    password: "{{ hotspot_user_pass }}"
  - name: "{{ radius_user }}"
    password: "{{ radius_user_pass }}"

postgresql_databases:
  - name: hotspot
    owner: "{{ hotspot_user }}"
  - name: radius_users_mikrotik
    owner: "{{ radius_user }}"
  - name: radius_users_cisco
    owner: "{{ radius_user }}"
  - name: radius_users_chilli
    owner: "{{ radius_user }}"
  - name: radius_access_points
    owner: "{{ radius_user }}"

enable_local_dns: false

ufw_rules:
  - rule: 'allow'
    port: 22
    proto: 'tcp'
    from_ip:
      - 0.0.0.0/0
    to_ip: "{{ inventory_hostname }}"
  - rule: 'allow'
    port: 5432
    proto: 'tcp'
    from_ip: "{{ [groups['radius'], groups['postgresql']]|flatten }}"
    to_ip: "{{ inventory_hostname }}"

#from_ip: ["{{ lookup('flattened', groups['radius'], groups['postgresql']) }}"]
