---
radius_conf: "{{ inventory_dir }}/group_vars/radius/vault.yml"
radius_server: "{{ groups['radius'][1] }}"

softether_srcdir: vpnserver
softether_bindir: /usr/local
softether_source_url: https://ams3.digitaloceanspaces.com/gettwifi/source/softether-vpnserver-v4.27-9668-beta-2018.05.29-linux-x64-64bit.tar.gz

softether_config:
  - src: 'vpn_server.config'
    dest: '{{ softether_bindir }}/{{ softether_srcdir }}/vpn_server.config'

softether_template:
  - src: 'vpnserver.service'
    dest: '/lib/systemd/system/vpnserver.service'
  - src: 'tap.yaml'
    dest: '/etc/netplan/tap.yaml'

ufw_rules:
  - rule: 'allow'
    port: 22
    proto: 'tcp'
    from_ip:
      - 10.135.0.0/16
  - rule: 'allow'
    port: 443
    proto: 'tcp'
    from_ip:
      - 0.0.0.0/0
  - rule: 'allow'
    port: 500
    proto: 'udp'
    from_ip:
      - 0.0.0.0/0
  - rule: 'allow'
    port: 4500
    proto: 'udp'
    from_ip:
      - 0.0.0.0/0
  - rule: 'allow'
    port: 1701
    proto: 'udp'
    from_ip:
      - 0.0.0.0/0
  - rule: 'allow'
    port: 10050
    proto: 'tcp'
    from_ip:
      - 10.135.0.0/16
    to_ip: "{{ inventory_hostname }}"
  - rule: 'allow'
    port: 80
    proto: 'tcp'
    from_ip:
      - 10.135.0.0/16
      - 172.20.0.0/16
  - rule: 'allow'
    port: 9200
    proto: 'tcp'
    from_ip:
      - 10.135.0.0/16
      - 172.20.0.0/16
  - rule: 'allow'
    port: 5432
    proto: 'tcp'
    from_ip:
      - 10.135.0.0/16
      - 172.20.0.0/16

sniffr_dir: /var/www/sniffr
sniffr_port: 37008
sniffr_pass: 123456
sniffr_user: web
sniffr_group: sniffr

local_user:
  - name: "{{ sniffr_user }}"
    group: "{{ sniffr_group }}"
    password: 1128256asdf
    password_lock: yes
    home: /opt/www
    shell: /bin/bash
    groups:
      - sniffr
      - "{{ sniffr_group }}"

monit_template:
  - dir: conf-available
    link: 'conf-enabled'
    template:
      - src: 'monit-sniffr.conf'
        dest: 'sniffr.conf'